{"ast":null,"code":"import _classCallCheck from\"/home/jordan/projects/djangoreactshop-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jordan/projects/djangoreactshop-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jordan/projects/djangoreactshop-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jordan/projects/djangoreactshop-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import axios from\"axios\";import{Container,Dimmer,Image,Item,Label,Loader,Message,Segment}from\"semantic-ui-react\";import{productListURL,addToCartURL}from\"../constants\";import{fetchCart}from\"../store/actions/cart\";import{authAxios}from\"../utils\";var ProductList=/*#__PURE__*/function(_React$Component){_inherits(ProductList,_React$Component);var _super=_createSuper(ProductList);function ProductList(){var _this;_classCallCheck(this,ProductList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false,error:null,data:[]};_this.handleAddToCart=function(slug){_this.setState({loading:true});authAxios.post(addToCartURL,{slug:slug}).then(function(res){_this.props.refreshCart();_this.setState({loading:false});}).catch(function(err){_this.setState({error:err,loading:false});});};return _this;}_createClass(ProductList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({loading:true});axios.get(productListURL).then(function(res){_this2.setState({data:res.data,loading:false});}).catch(function(err){_this2.setState({error:err,loading:false});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,data=_this$state.data,error=_this$state.error,loading=_this$state.loading;return/*#__PURE__*/React.createElement(Container,null,error&&/*#__PURE__*/React.createElement(Message,{error:true,header:\"There was some errors with your submission\",content:JSON.stringify(error)}),loading&&/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Dimmer,{active:true,inverted:true},/*#__PURE__*/React.createElement(Loader,{inverted:true},\"Loading\")),/*#__PURE__*/React.createElement(Image,{src:\"/images/wireframe/short-paragraph.png\"})),/*#__PURE__*/React.createElement(Item.Group,{divided:true},data.map(function(item){return/*#__PURE__*/React.createElement(Item,{key:item.id},/*#__PURE__*/React.createElement(Item.Image,{src:item.image}),/*#__PURE__*/React.createElement(Item.Content,null,/*#__PURE__*/React.createElement(Item.Header,{as:\"a\",onClick:function onClick(){return _this3.props.history.push(\"/products/\".concat(item.id));}},item.title),/*#__PURE__*/React.createElement(Item.Meta,null,/*#__PURE__*/React.createElement(\"span\",{className:\"cinema\"},item.category)),/*#__PURE__*/React.createElement(Item.Description,null,item.description),/*#__PURE__*/React.createElement(Item.Extra,null,item.discount_price&&/*#__PURE__*/React.createElement(Label,{color:item.label===\"primary\"?\"blue\":item.label===\"secondary\"?\"green\":\"olive\"},item.label))));})));}}]);return ProductList;}(React.Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{refreshCart:function refreshCart(){return dispatch(fetchCart());}};};export default connect(null,mapDispatchToProps)(ProductList);","map":{"version":3,"sources":["/home/jordan/projects/djangoreactshop-main/src/containers/ProductList.js"],"names":["React","connect","axios","Container","Dimmer","Image","Item","Label","Loader","Message","Segment","productListURL","addToCartURL","fetchCart","authAxios","ProductList","state","loading","error","data","handleAddToCart","slug","setState","post","then","res","props","refreshCart","catch","err","get","JSON","stringify","map","item","id","image","history","push","title","category","description","discount_price","label","Component","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport {\n  Container,\n  Dimmer,\n  Image,\n  Item,\n  Label,\n  Loader,\n  Message,\n  Segment\n} from \"semantic-ui-react\";\nimport { productListURL, addToCartURL } from \"../constants\";\nimport { fetchCart } from \"../store/actions/cart\";\nimport { authAxios } from \"../utils\";\n\nclass ProductList extends React.Component {\n  state = {\n    loading: false,\n    error: null,\n    data: []\n  };\n\n  componentDidMount() {\n    this.setState({ loading: true });\n    axios\n      .get(productListURL)\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  }\n\n  handleAddToCart = slug => {\n    this.setState({ loading: true });\n    authAxios\n      .post(addToCartURL, { slug })\n      .then(res => {\n        this.props.refreshCart();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  render() {\n    const { data, error, loading } = this.state;\n    return (\n      <Container>\n        {error && (\n          <Message\n            error\n            header=\"There was some errors with your submission\"\n            content={JSON.stringify(error)}\n          />\n        )}\n        {loading && (\n          <Segment>\n            <Dimmer active inverted>\n              <Loader inverted>Loading</Loader>\n            </Dimmer>\n\n            <Image src=\"/images/wireframe/short-paragraph.png\" />\n          </Segment>\n        )}\n        <Item.Group divided>\n          {data.map(item => {\n            return (\n              <Item key={item.id}>\n                <Item.Image src={item.image} />\n                <Item.Content>\n                  <Item.Header\n                    as=\"a\"\n                    onClick={() =>\n                      this.props.history.push(`/products/${item.id}`)\n                    }\n                  >\n                    {item.title}\n                  </Item.Header>\n                  <Item.Meta>\n                    <span className=\"cinema\">{item.category}</span>\n                  </Item.Meta>\n                  <Item.Description>{item.description}</Item.Description>\n                  <Item.Extra>\n                    {/* <Button\n                      primary\n                      floated=\"right\"\n                      icon\n                      labelPosition=\"right\"\n                      onClick={() => this.handleAddToCart(item.slug)}\n                    >\n                      Add to cart\n                      <Icon name=\"cart plus\" />\n                    </Button> */}\n                    {item.discount_price && (\n                      <Label\n                        color={\n                          item.label === \"primary\"\n                            ? \"blue\"\n                            : item.label === \"secondary\"\n                            ? \"green\"\n                            : \"olive\"\n                        }\n                      >\n                        {item.label}\n                      </Label>\n                    )}\n                  </Item.Extra>\n                </Item.Content>\n              </Item>\n            );\n          })}\n        </Item.Group>\n      </Container>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(ProductList);\n"]},"metadata":{},"sourceType":"module"}